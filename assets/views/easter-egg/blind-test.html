<ul class="grid-list full-size">
    <li class="grid-list-item">
        <a class="button" onclick="playSong(this);">
            <i class="mdi mdi mdi-play"></i>
            %{page.play_song}
        </a>
    </li>
</ul>
<script type="application/javascript">
    let songName;

    function playSong(button) {
        button.onclick = undefined;
        button.text = '%{page.song_playing}';

        fetch("@{song-player|action=play,song=*}").catch(reason => {
            button.text = reason;
        }).then(result => {
            return result.json();
        }).then(result => {
            if (result.song)
                songName = result.song;
            else
                songName = "error";
        });

        setTimeout(function () {
            giveAnswer(button);
        }, 10_000);
    }

    function giveAnswer(button) {
        button.onclick = playSong(button);
        button.text = "%{page.answer}" + songName;
    }
</script>